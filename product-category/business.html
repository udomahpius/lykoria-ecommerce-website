<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Category - NAME</title>
  <link rel="stylesheet" href="../css/global-css.css">
  <style>
    :root {
      --bg: #fff;
      --text: #1e1e2f;
      --accent: #f68b1e;
      --header-bg: #030346;
      --header-text: #fff;
      --card-bg: #fff;
      --card-border: #eee;
      --card-text: #333;
      --sidebar-bg: #f9f9f9;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
    body { background: var(--bg); color: var(--text); }
    /* Layout */
    .container {
      display: grid;
      grid-template-columns: 250px 1fr;
      gap: 20px;
      padding: 20px;
    }

    /* Sidebar */
    .sidebar {
      background: var(--sidebar-bg);
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
    }
    .sidebar h3 { margin-bottom: 10px; font-size: 18px; }
    .sidebar label { display: block; margin-bottom: 8px; font-size: 14px; cursor: pointer; }

/* --- Categories --- */
.categories {
  padding: 40px 20px;
  text-align: center;
  padding-top: 9rem;
}
.categories h2 {
  font-size: 2rem;
  margin-bottom: 25px;
}
.category-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(150px,1fr));
  gap: 20px;
}
.category-card {
  background: #fff;
  border: 1px solid #ddd;
  border-radius: 8px;
  overflow: hidden;
  transition: transform .2s;
  cursor: pointer;
}
.category-card img {
  width: 100%; height: 120px; object-fit: cover;
}
.category-card p {
  padding: 10px; font-weight: bold; color:#333;
}
.category-card:hover { transform: translateY(-5px); }



    /* Search */
    .search-bar { margin: 15px 0; display: flex; gap: 10px; }
    .search-bar input {
      flex: 1; padding: 10px;
      border: 1px solid #ccc; border-radius: 4px;
    }
    .search-bar button {
      padding: 10px 15px;
      background: var(--accent); border: none;
      color: white; border-radius: 4px;
      cursor: pointer;
    }

    /* Grid */
    .posts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
    }
    .post-card {
      border: 1px solid var(--card-border);
      border-radius: 6px;
      background: var(--card-bg);
      overflow: hidden;
      transition: 0.3s;
    }
    .post-card:hover { box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
    .post-card img { width: 100%; height: 150px; object-fit: cover; }
    .post-card-content { padding: 10px; }
    .post-card-content h3 { font-size: 16px; margin-bottom: 8px; color: var(--card-text); }
    .post-card-content p { font-size: 14px; color: #555; margin-bottom: 10px; }
    .post-card-content a {
      text-decoration: none; background: var(--accent);
      color: white; padding: 6px 10px; border-radius: 4px;
      font-size: 14px;
    }

    /* Pagination */
    .pagination { margin: 20px 0; text-align: center; }
    .pagination button {
      padding: 10px 20px;
      background: var(--accent);
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
    }

    /* Responsive */
    @media(max-width: 900px) {
      nav { display: none; }
      .menu-toggle { display: block; }
      .container { grid-template-columns: 1fr; }
      .sidebar { order: 2; }
    }



#cartCount {
  background: #f68b1e;
  color: #fff;
  border-radius: 50%;
  padding: 2px 7px;
  font-size: 12px;
  margin-left: 4px;
}

#cartItems { margin: 20px; }
.cart-item {
  display: flex;
  align-items: center;
  border-bottom: 1px solid #eee;
  padding: 10px 0;
}
.cart-item img {
  width: 80px; height: 80px;
  object-fit: cover;
  margin-right: 15px;
}
.cart-info { flex: 1; }
.cart-info h4 { margin: 0 0 5px; font-size: 16px; }
.quantity { display: flex; align-items: center; gap: 8px; }
.quantity button {
  background: #ddd; border: none;
  padding: 4px 10px; cursor: pointer;
}
.remove { background: none; border: none; color: red; cursor: pointer; }
.cart-total { margin-top: 20px; text-align: right; }
.cart-total button {
  background: #f68b1e; color: #fff; border: none;
  padding: 10px 20px; cursor: pointer;
}

  </style>
</head>
<body>

<!-- ====== HEADER ====== -->
<header class="header">
  <div class="top-bar">
    <!-- Logo -->
    <div class="logo">
      <a href="../index.html"><img src="../assets/logo.png" alt="Logo"></a>
    </div>

    <!-- Search with category -->
    <div class="search-box">
      <select class="search-category">
        <option value="all">All Categories</option>
        <option value="health">Health</option>
        <option value="sports">Sports</option>
        <option value="business">Business</option>
        <option value="education">Education</option>
        <option value="entertainment">Entertainment</option>
      </select>
      <input type="text" placeholder="Search for products, brands and more..." />
      <button onclick="handleSearch()"><i class="fa-solid fa-magnifying-glass"></i></button>

    </div>

    <!-- Right icons -->
    <div class="header-icons">
      <a href="#"><i class="fas fa-user"></i> Account</a>
      <a href="#"><i class="fas fa-question-circle"></i> Help</a>
 <a href="../html/cart.html">
    üõí Cart (<span id="cartCount">0</span>)
  </a>
    </div>

    <!-- Mobile toggle -->
    <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>
  </div>

  <!-- ===== Mega Menu (Desktop only) ===== -->
  <nav class="mega-menu">
    <ul>
      <li><a href="health.html">Health</a></li>
      <li><a href="sports.html">Sports</a></li>
      <li><a href="business.html">Business</a></li>
      <li><a href="education.html">Education</a></li>
      <li><a href="entertainment.html">Entertainment</a></li>
      <li><a href="#">Lifestyle</a></li>
      <li><a href="#">Fashion</a></li>
      <li><a href="#">Electronics</a></li>
      <li><a href="#">Groceries</a></li>
    </ul>
  </nav>
</header>

<!-- ===== Mobile Nav ===== -->
<div class="mobile-nav" id="mobileNav">
  <button class="close-btn" onclick="toggleMenu()">‚úñ</button>
  <ul>
    <li><a href="../index.html">Home</a></li>
    <li class="has-sub">
      <a href="#">Categories ‚ñæ</a>
      <ul class="sub-menu">
        <li><a href="health.html">Health</a></li>
        <li><a href="sports.html">Sports</a></li>
        <li><a href="business.html">Business</a></li>
        <li><a href="education.html">Education</a></li>
        <li><a href="entertainment.html">Entertainment</a></li>
        <li><a href="#">Lifestyle</a></li>
        <li><a href="#">Fashion</a></li>
        <li><a href="#">Electronics</a></li>
        <li><a href="#">Groceries</a></li>
      </ul>
    </li>
    <li><a href="#">Account</a></li>
    <li><a href="#">Help</a></li>
    <li> <a href="../html/cart.html">
    üõí Cart (<span id="cartCount">0</span>)
  </a>

</li>
  </ul>
</div>
<div class="overlay" id="overlay" onclick="toggleMenu()"></div>



<!-- ===== Category Thumbnails ===== -->
<section class="categories">
  <h2>Top Categories</h2>
  <div class="category-grid">
    <div class="category-card">
      <img src="https://via.placeholder.com/200x150?text=Health" alt="Health">
      <p>Health</p>
    </div>
    <div class="category-card">
      <img src="https://via.placeholder.com/200x150?text=Sports" alt="Sports">
      <p>Sports</p>
    </div>
    <div class="category-card">
      <img src="https://via.placeholder.com/200x150?text=Business" alt="Business">
      <p>Business</p>
    </div>
    <div class="category-card">
      <img src="https://via.placeholder.com/200x150?text=Education" alt="Education">
      <p>Education</p>
    </div>
    <div class="category-card">
      <img src="https://via.placeholder.com/200x150?text=Entertainment" alt="Entertainment">
      <p>Entertainment</p>
    </div>
    <div class="category-card">
      <img src="https://via.placeholder.com/200x150?text=Lifestyle" alt="Lifestyle">
      <p>Lifestyle</p>
    </div>
  </div>
</section>
<div id="searchResults"></div>


<div class="container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <h3>Filters</h3>
    <label><input type="checkbox" name="filter" value="recent"> Most Recent</label>
    <label><input type="checkbox" name="filter" value="popular"> Popular</label>
    <label><input type="checkbox" name="filter" value="draft"> Drafts</label>
  </aside>

  <!-- Main Content -->
  <main>
    <h2 id="categoryTitle">Category Posts</h2>

    <!-- Search -->
    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search posts...">
      <button onclick="clearSearch()">Clear</button>
    </div>

    <!-- Posts -->
    <div id="categoryPosts" class="posts-grid"></div>

    <!-- Pagination -->
    <div class="pagination">
      <button id="loadMore">Load More</button>
    </div>
  </main>

</div>

<!-- ===== Footer ===== -->
<footer class="footer">
  <div class="footer-top">
    <div class="footer-col">
      <h3>Need Help?</h3>
      <ul>
        <li><a href="#">FAQ</a></li>
        <li><a href="#">Shipping</a></li>
        <li><a href="#">Returns</a></li>
        <li><a href="#">Track Order</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h3>About Us</h3>
      <ul>
        <li><a href="#">Company Info</a></li>
        <li><a href="#">Careers</a></li>
        <li><a href="#">Affiliate Program</a></li>
        <li><a href="#">Press</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h3>Make Money</h3>
      <ul>
        <li><a href="#">Sell Products</a></li>
        <li><a href="#">Become a Partner</a></li>
        <li><a href="#">Advertise</a></li>
      </ul>
    </div>
    <div class="footer-col">
      <h3>Follow Us</h3>
      <div class="socials">
        <a href="#">üåê</a>
        <a href="#">üìò</a>
        <a href="#">üê¶</a>
        <a href="#">üì∏</a>
      </div>
    </div>
  </div>
  <div class="footer-bottom">
    <p>&copy; 2025 Lykoria. All rights reserved.</p>
  </div>
</footer>

<script>
const BASE_URL = "https://lykoria-ecommerce-website.onrender.com";
const API_URL = `${BASE_URL}/api/posts`;
const CATEGORY = window.location.pathname.split("/").pop().replace(".html","").toLowerCase();

let page = 1;
const limit = 8;
let postsData = [];

async function loadCategory(reset=false) {
  const postsContainer = document.getElementById("categoryPosts");
  const titleEl = document.getElementById("categoryTitle");
  if (reset) { page = 1; postsData = []; postsContainer.innerHTML = ""; }

  try {
    const res = await fetch(`${API_URL}?category=${CATEGORY}&status=published&page=${page}&limit=${limit}`);
    if (!res.ok) throw new Error("Failed to fetch posts");
    const posts = await res.json();
    postsData = [...postsData, ...posts];

    const categoryLabel = CATEGORY.charAt(0).toUpperCase()+CATEGORY.slice(1);
    titleEl.innerText = `${categoryLabel} Posts`;
    document.title = `${categoryLabel} - Lykoria`;

    if (!posts.length && page === 1) {
      postsContainer.innerHTML = `<p>No posts found for ${categoryLabel}.</p>`;
      return;
    }

posts.forEach(p => {
  const div = document.createElement("div");
  div.className = "post-card";
  div.innerHTML = `
    ${p.image ? `<img src="${p.image}" alt="${p.title}">` : ""}
    <div class="post-card-content">
      <h3>${p.title}</h3>
      <p>${p.body.substring(0,100)}...</p>
      <a href="${p.url}" target="_blank">${p.urlText || "Read More"}</a>
      <button 
        class="add-to-cart"
        data-id="${p._id || p.id}" 
        data-title="${p.title}" 
        data-price="${p.price || 0}" 
        data-image="${p.image || ''}">
        Add to Cart
      </button>
    </div>
  `;
  postsContainer.appendChild(div);
});


  } catch (err) {
    console.error(err);
  }
}

document.addEventListener("DOMContentLoaded", ()=> {
  loadCategory(true);
  document.getElementById("loadMore").addEventListener("click", ()=>{ page++; loadCategory(); });

  // Search filter
  document.getElementById("searchInput").addEventListener("input", e=>{
    const q = e.target.value.toLowerCase();
    const postsContainer = document.getElementById("categoryPosts");
    postsContainer.innerHTML = "";
    postsData.filter(p => p.title.toLowerCase().includes(q) || p.body.toLowerCase().includes(q))
      .forEach(p=>{
        const div = document.createElement("div");
        div.className = "post-card";
        div.innerHTML = `
          ${p.image ? `<img src="${p.image}" alt="${p.title}">` : ""}
          <div class="post-card-content">
            <h3>${p.title}</h3>
            <p>${p.body.substring(0,100)}...</p>
            <a href="${p.url}" target="_blank">${p.urlText||"Read More"}</a>
          </div>
        `;
        postsContainer.appendChild(div);
      });
  });
});

function clearSearch() {
  document.getElementById("searchInput").value = "";
  const postsContainer = document.getElementById("categoryPosts");
  postsContainer.innerHTML = "";
  postsData.forEach(p=>{
    const div = document.createElement("div");
    div.className = "post-card";
    div.innerHTML = `
      ${p.image ? `<img src="${p.image}" alt="${p.title}">` : ""}
      <div class="post-card-content">
        <h3>${p.title}</h3>
        <p>${p.body.substring(0,100)}...</p>
        <a href="${p.url}" target="_blank">${p.urlText||"Read More"}</a>
      </div>
    `;
    postsContainer.appendChild(div);
  });
}



</script>

  <script src="../js/global-js.js"></script>

<script src="https://kit.fontawesome.com/79a2ec8048.js" crossorigin="anonymous"></script>
</body>
</html>
